# ä½¿ç”¨Ultralyticsåº“è®­ç»ƒDOTAé¥æ„Ÿæ•°æ®é›†

---
<div style="display: flex; align-items: flex-start; margin: 20px;">
  <!-- å·¦ä¾§ä½œè€…ä¿¡æ¯ -->
  <div style="flex: 1; padding: 10px; border-right: 1px solid #ddd;">
    <p>
    ä½œè€…ï¼š
      <img src="%E4%BD%BF%E7%94%A8Ultralytics%E5%BA%93%E8%AE%AD%E7%BB%83DOTA%E9%81%A5%E6%84%9F%E6%95%B0%E6%8D%AE%E9%9B%86%201439fafb0fa280e6934ed1f8a14d2663/icon.jpeg" alt="icon" width="20" style="vertical-align: middle; margin-right: 5px;">
      ä¸­å›½è®¡é‡å¤§å­¦â€”â€”
      <img src="%E4%BD%BF%E7%94%A8Ultralytics%E5%BA%93%E8%AE%AD%E7%BB%83DOTA%E9%81%A5%E6%84%9F%E6%95%B0%E6%8D%AE%E9%9B%86%201439fafb0fa280e6934ed1f8a14d2663/Snipaste_2024-11-24_02-13-56.png" alt="icon" width="20" style="vertical-align: middle; margin-right: 5px;">
      23æ™ºèƒ½3ææ˜Šæ´‹ã€
    ä¸­å›½è®¡é‡å¤§å­¦â€”â€”
    23æ™ºèƒ½1ç‹æ™¶
    </p>
  </div>
  

  <!-- å³ä¾§é“¾æ¥å— -->
  <div style="flex: 2; padding: 10px;">
    <!-- GitHubé“¾æ¥å— -->
    <div style="border: 1px solid #ddd; border-radius: 10px; padding: 15px; margin-bottom: 15px; display: flex; align-items: center;">
      <img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub Logo" style="width: 50px; height: 50px; margin-right: 15px; border-radius: 5px;">
      <div>
        <p style="margin: 0; font-size: 14px; color: #0366d6;">
          <a href="https://github.com/231055558" style="text-decoration: none; font-weight: bold;">GitHub: 231055558</a>
        </p>
        <p style="margin: 5px 0; font-size: 12px; color: #555;">æ¬¢è¿è®¿é—®æˆ‘çš„githubä¸»é¡µ repositories.</p>
      </div>
    </div>
    <!-- Bilibilié“¾æ¥å— -->
    <div style="border: 1px solid #ddd; border-radius: 10px; padding: 15px; margin-bottom: 15px; display: flex; align-items: center;">
      <img src="%E4%BD%BF%E7%94%A8Ultralytics%E5%BA%93%E8%AE%AD%E7%BB%83DOTA%E9%81%A5%E6%84%9F%E6%95%B0%E6%8D%AE%E9%9B%86%201439fafb0fa280e6934ed1f8a14d2663/Snipaste_2024-11-24_02-13-56.png" alt="Bilibili Logo" style="width: 50px; height: 50px; margin-right: 15px; border-radius: 5px;">
      <div>
        <p style="margin: 0; font-size: 14px; color: #0366d6;">
          <a href="https://www.bilibili.com/video/BV1kqBbYREMu/" style="text-decoration: none; font-weight: bold;">é…å¥—è§†é¢‘é“¾æ¥</a>
        </p>
        <p style="margin: 5px 0; font-size: 12px; color: #555;">bilibili:åˆ«å·äº†æå¸ˆå‚…</p>
      </div>
    </div>
    <!-- CSDNé“¾æ¥å— -->
    <div style="border: 1px solid #ddd; border-radius: 10px; padding: 15px; display: flex; align-items: center;">
      <img src="https://www.csdn.net/favicon.ico" alt="CSDN Logo" style="width: 50px; height: 50px; margin-right: 15px; border-radius: 5px;">
      <div>
        <p style="margin: 0; font-size: 14px; color: #0366d6;">
          <a href="https://blog.csdn.net/lhy2310/article/details/144002065?sharetype=blogdetail&sharerId=144002065&sharerefer=PC&sharesource=lhy2310&spm=1011.2480.3001.8118" style="text-decoration: none; font-weight: bold;">CSDNæ–‡ç« é“¾æ¥</a>
        </p>
        <p style="margin: 5px 0; font-size: 12px; color: #555;">ä½¿ç”¨Ultralyticsåº“è®­ç»ƒDOTAé¥æ„Ÿæ•°æ®é›†</p>
      </div>
    </div>
  </div>
</div>

# ç›®å½•ï¼š

- [å¼•è¨€](#å¼•è¨€)

Part 1:

1. [é…ç½®ç¯å¢ƒ](#1-é…ç½®ç¯å¢ƒ)
2. [æµ‹è¯•æ°´å¹³æ¡†ç›®æ ‡æ£€æµ‹](#2-æµ‹è¯•æ°´å¹³æ¡†ç›®æ ‡æ£€æµ‹)
3. [æµ‹è¯•æ—‹è½¬æ¡†ç›®æ ‡æ£€æµ‹](#3-æµ‹è¯•æ—‹è½¬æ¡†ç›®æ ‡æ£€æµ‹)

Part 2:

1. [äº†è§£æ•°æ®å½¢å¼](#1-äº†è§£æ•°æ®å½¢å¼)
2. [å‡†å¤‡æ•°æ®é›†](#2-å‡†å¤‡æ•°æ®é›†)
3. [åˆ‡å‰²æ•°æ®å›¾åƒå’Œæ ‡æ³¨](#3-åˆ‡å‰²æ•°æ®å›¾åƒå’Œæ ‡æ³¨)
4. [è°ƒæ•´æ–‡ä»¶ç»“æ„](#4è°ƒæ•´æ–‡ä»¶ç»“æ„)
5. [è°ƒæ•´txtæ ¼å¼](#5è°ƒæ•´txtæ ¼å¼)
6. [ç¼–å†™yamlæ–‡ä»¶](#6-ç¼–å†™yamlæ–‡ä»¶)

Part 3:

1. [Ultralyticsåº“æœ€åŸºç¡€çš„ä½¿ç”¨æ–¹æ³•](#1-ultralyticsåº“æœ€åŸºç¡€çš„ä½¿ç”¨æ–¹æ³•)
2. [è¿›è¡Œæ¨¡å‹è®­ç»ƒ](#2-è¿›è¡Œæ¨¡å‹è®­ç»ƒ)
3. [å¯è§†åŒ–é¢„æµ‹](#3-å¯è§†åŒ–é¢„æµ‹)
4. [è¿›è¡Œæ¨¡å‹æœ¬åœ°éªŒè¯](#4-è¿›è¡Œæ¨¡å‹æœ¬åœ°éªŒè¯)
5. [è¿›è¡Œæ¨¡å‹æµ‹è¯•ä¸ç»“æœåˆå¹¶](#5-è¿›è¡Œæ¨¡å‹æµ‹è¯•ä¸ç»“æœåˆå¹¶)
6. [ä¸Šä¼ æœåŠ¡å™¨è¯„åˆ†](#6-ä¸Šä¼ æœåŠ¡å™¨è¯„åˆ†)

## å¼•è¨€

åœ¨è¿›è¡Œä¸€åˆ‡ä¹‹å‰ï¼Œå¦‚æœä½ æ˜¯ä¸€ä½AIåˆå­¦è€…ï¼Œä½ å¿…é¡»çŸ¥é“çš„ä¸€äº›ä¿¡æ¯ï¼š

1. ä»€ä¹ˆæ˜¯DOTAæ•°æ®é›†ï¼Ÿ
DOTAï¼ˆDataset for Object Detection in Aerial Imagesï¼‰æ˜¯ä¸€ä¸ªä¸“ä¸ºé¥æ„Ÿå›¾åƒç›®æ ‡æ£€æµ‹ä»»åŠ¡è®¾è®¡çš„æ ‡å‡†æ•°æ®é›†ã€‚å®ƒåŒ…å«äº†å¤§é‡çš„èˆªç©ºå’Œå«æ˜Ÿå›¾åƒï¼Œåˆ†è¾¨ç‡é«˜ã€è§†é‡å¹¿ï¼Œå›¾åƒä¸­çš„ç‰©ä½“å¾€å¾€æ˜¯å°è€Œå¤æ‚çš„ï¼Œæ¯”å¦‚è½¦è¾†ã€é£æœºã€èˆ¹åªå’Œå»ºç­‘ç­‰ã€‚
2. ç©¶ç«Ÿåœ¨åšä¸€ä»¶ä»€ä¹ˆäº‹ï¼Ÿ
åœ¨è¿™ä¸ªä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯è®­ç»ƒä¸€ä¸ªæ¨¡å‹ï¼Œèƒ½å¤Ÿåœ¨é¥æ„Ÿå›¾åƒä¸­ç²¾å‡†æ£€æµ‹å’Œå®šä½ç‰¹å®šç›®æ ‡ã€‚å…·ä½“æµç¨‹æ˜¯ï¼š
    1. **è¾“å…¥æ•°æ®**ï¼šå°† DOTA æ•°æ®é›†ä¸­çš„é¥æ„Ÿå›¾åƒå’Œç›®æ ‡æ ‡æ³¨æä¾›ç»™æ¨¡å‹ã€‚
    2. **æ¨¡å‹å­¦ä¹ **ï¼šé€šè¿‡è®­ç»ƒï¼Œæ¨¡å‹å­¦ä¹ å¦‚ä½•ä»å›¾åƒä¸­æå–ç‰¹å¾å¹¶è¯†åˆ«ç›®æ ‡çš„ä½ç½®ä¸ç±»åˆ«ã€‚
    3. **é¢„æµ‹ä¸ä¼˜åŒ–**ï¼šè®­ç»ƒå¥½çš„æ¨¡å‹å¯ä»¥åœ¨æ–°å›¾åƒä¸­æ£€æµ‹ç›®æ ‡ï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥ä¼˜åŒ–å…¶æ€§èƒ½ï¼Œä»¥åº”å¯¹å¤æ‚çš„åœºæ™¯å’Œå°ç›®æ ‡æŒ‘æˆ˜ã€‚
3. ä¸ºä»€ä¹ˆæˆ‘æ¨èä½¿ç”¨Ultralyticsï¼Ÿ
Ultralyticsçš„å®‰è£…å¯¹äºå¤§éƒ¨åˆ†ç¯å¢ƒéƒ½æ¯”è¾ƒå‹å¥½ï¼Œå¹¶ä¸”é€šå¸¸ä¸€æ¬¡æ€§å°±å¯ä»¥å®Œæˆç¯å¢ƒçš„é…ç½®ï¼Œä¸”æä¾›äº†æ¸…æ™°çš„æ–‡æ¡£å’Œç®€å•çš„ä»£ç æ¥å£ï¼Œå‡ è¡Œä»£ç å°±èƒ½å®ç°å¤æ‚çš„ç›®æ ‡æ£€æµ‹ä»»åŠ¡ã€‚å½“ç„¶æˆ‘å¹¶ä¸æ˜¯ä¸å»ºè®®å¤§å®¶æŠ˜ç£¨ç¯å¢ƒçš„é…ç½®ï¼Œå› ä¸ºå¦‚æœä½ æ·±å…¥å­¦ä¹ ä¼šå‘ç°ï¼Œæå¤§éƒ¨åˆ†çš„æ¨¡å‹é˜»ç¢ä½ å®ç°çš„åŸå› éƒ½æ˜¯ç¯å¢ƒé…ç½®ã€‚
4. ä¸€äº›ç›¸å…³çš„ç½‘ç«™:
    
    **DOTA æ•°æ®é›†å®˜ç½‘**ï¼šhttp://captain.whu.edu.cn/DOTAweb/ ï¼ˆåœ¨æˆ‘å¤æŸ¥æ–‡æ¡£çš„æ—¶å€™å‘ç°è¿™ä¸ªç½‘ç«™ä¼¼ä¹è¢«å…³é—­äº†ï¼Œä½†æ˜¯è¿™ä¸ªå¯ä»¥ï¼šhttps://captain-whu.github.io/DOTA/index.html
    
    **Ultralytics å®˜ç½‘**ï¼šhttps://ultralytics.com/
    
    **Ultralytics GitHub é¡¹ç›®**ï¼šhttps://github.com/ultralytics/ultralytics
    
    **Ultralytics OBBä»»åŠ¡ä»‹ç»**
    ï¼šhttps://docs.ultralytics.com/tasks/obb/
    
5. <span style="color:red">æœ¬æ–‡ä¸ä¼šè®²ä»€ä¹ˆ</span>ï¼š
åœ¨æœ¬æ–‡æˆ‘ä¼šé»˜è®¤ä½ å·²ç»é€‰æ‹©å¥½äº†å¿ƒä»ªçš„ç¼–è¯‘å™¨ï¼ˆpycharmã€vscodeï¼‰ï¼Œæ‡‚å¾—å¦‚ä½•æ‰“å¼€cmdå‘½ä»¤è¡Œï¼Œå¦‚ä½•ä½¿ç”¨æœ€æœ€æœ€åŸºç¡€çš„condaæŒ‡ä»¤ï¼ˆåªè¦ä½ ä½¿ç”¨è¿‡å¹¶ä¸”èƒ½ä½¿ç”¨å°±å¯ä»¥ï¼‰ï¼Œä»¥åŠæœ€åŸºç¡€çš„ç”µè„‘æ“ä½œï¼Œä¾‹å¦‚å¤åˆ¶ç²˜è´´æ‰“å¼€ç½‘é¡µæŸ¥è¯¢åŸºç¡€èµ„æ–™ç­‰ã€‚åŒæ—¶ï¼Œå…³äºé­”æ³•ä¸Šç½‘ï¼Œéœ€è¦åŒå­¦ä»¬è‡ªå·±è§£å†³ï¼Œæˆ–è€…äº’ç›¸å¸®åŠ©ã€‚
6. <span style="color:blue">å…¶ä»–å·¥ä½œ</span>ï¼š
åœ¨æ–‡ç« ä¸­æˆ‘å¯¹ä¸€äº›å¯¹äºæ–°æ‰‹ä¸å¤ªå‹å¥½çš„åè¯è¿›è¡Œäº†<span style="color:#FFBF00">ç‰¹åˆ«æ³¨é‡Šï¼ˆé»„è‰²ï¼‰</span>ï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åŠ©ä½ ä»¬æ›´å¥½åœ°ç†è§£æ–‡ç« ï¼ŒåŒæ—¶å®Œæˆäº†é…å¥—è§†é¢‘ï¼Œå¯ä»¥ä½œä¸ºå‚è€ƒï¼š

## Part1

### 1. é…ç½®ç¯å¢ƒï¼š

é¦–å…ˆä½ éœ€è¦æŒ‰ç…§Ultralyticsçš„è¦æ±‚å‡†å¤‡ä¸€ä¸ªå¯ä»¥è¿è¡Œyoloçš„<span style="color:#FFBF00">è™šæ‹Ÿç¯å¢ƒ</span>ï¼Œå…¶å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼Œåœ¨ç»ˆç«¯ï¼ˆcmdï¼‰ä¸­è¾“å…¥ï¼š

```bash
conda create -n yolo_dota python=3.8
```

å…¶ä¸­-næ˜¯è¡¨ç¤ºæŒ‡å®šè™šæ‹Ÿç¯å¢ƒçš„åç§°ï¼Œä¾‹å¦‚è¿™é‡Œåˆ›å»ºçš„åç§°å°±æ˜¯â€œyolo_dotaâ€ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥æŒ‰ç…§ä½ çš„å–œå¥½æ›¿æ¢ï¼Œè®°å¾—ä½å°±è¡Œï¼‰

---

è€Œåæˆ‘ä»¬æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼Œå¹¶å®‰è£…<span style="color:#FFBF00">PyTorch</span>ï¼Œæˆ‘é€‰æ‹©äº†PyTorch=2.2.0ï¼ŒCUDAç‰ˆæœ¬ä¸º11.8çš„ç‰ˆæœ¬ï¼Œå»ºè®®å®‰è£…ç‰ˆæœ¬â‰¥2.0.0ï¼Œå¹¶ä¸”ä¸è¦å¤ªæ–°ï¼ˆåœ¨ä¹‹åçš„æ—¥å­é‡Œï¼Œä½ æ¯æ¬¡è·‘ä»£ç çš„æ—¶å€™éƒ½è¦åœ¨é€‰æ‹©PyTorchç‰ˆæœ¬ä¸Šæ‹‰æ‰¯å¾ˆä¹…ï¼Œç°åœ¨æ‰æ˜¯å¼€èƒƒå°èœï¼‰ï¼š

```bash
conda activate yolo_dota
```

```bash
pip install torch==2.2.0 torchvision==0.17.0 torchaudio==2.2.0 --index-url https://download.pytorch.org/whl/cu118
```

æ¥ä¸‹æ¥å°±æ˜¯å®‰è£…Ultralyticsçš„åº“äº†ï¼š

```bash
pip install ultralytics
```

å®Œæˆè¿™äº›æ­¥éª¤åï¼Œä½ çš„æ¨¡å‹çš„åŸºç¡€è™šæ‹Ÿç¯å¢ƒå°±ç®—åˆæ­¥é…ç½®å¥½äº†ï¼

### 2. æµ‹è¯•<span style="color:#FFBF00">æ°´å¹³æ¡†</span>ç›®æ ‡æ£€æµ‹ï¼š

ç”±äºè®­ç»ƒçš„å‰ææ˜¯æ•°æ®é›†ï¼Œä½†æ˜¯ä¸€ä¸ªå®Œæ•´ä¸”ä¼˜ç§€çš„æ•°æ®é›†é€šå¸¸éå¸¸å¤§ï¼Œå› æ­¤ä¸ºäº†å¿«è¿›åˆ°æµ‹è¯•çš„æ­¥éª¤ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæµ‹è¯•ä¸€ä¸‹æ¨¡å‹èƒ½å¦åœ¨æˆ‘ä»¬çš„ç¯å¢ƒä¸Šåˆæ­¥è¿è¡Œï¼Œæ¥éªŒè¯æ¨¡å‹å·²ç»æˆåŠŸå®‰è£…ã€‚

---

è¿™é‡Œæœ¬æ–‡ä»¥ç›®æ ‡æ£€æµ‹ä¸ºæ¡ˆä¾‹ä½œä¸ºæ¼”ç¤ºï¼š

ä½ éœ€è¦åœ¨ä¸€ä¸ªä»»æ„çš„æ–‡ä»¶å¤¹ä¸­ç¼–å†™ä¸€ä¸ªpythonæ–‡ä»¶ï¼š

```python
from ultralytics import YOLO

if __name__ == '__main__':

	model = YOLO("yolo11n.yaml").load("yolo11n.pt")  # build from YAML and transfer weights
	
	results = model.train(data="coco8.yaml", epochs=100, imgsz=640)
```

è¿™æ®µä»£ç ä¸­ï¼Œå¯¼å…¥äº†Ultralyticsåº“ï¼Œå¹¶æ„å»ºäº†yolo11nçš„æ¨¡å‹ï¼ŒåŠ è½½yolo11nçš„<span style="color:#FFBF00">cocoé¢„è®­ç»ƒæƒé‡</span>ã€‚å¹¶å°è¯•åœ¨<span style="color:#FFBF00">coco8.yaml</span>æ‰€å®šä¹‰çš„æ•°æ®é›†ä¸Šè¿›è¡Œè®­ç»ƒå’ŒéªŒè¯ã€‚

è¯·æ³¨æ„é¦–å…ˆå°†ä½ çš„ç¼–è¯‘å™¨è¿æ¥çš„ç¯å¢ƒè®¾ç½®æˆåˆšåˆšæ–°åˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒï¼Œè€Œåå°è¯•è¿è¡Œä¸Šè¿°çš„ä»£ç ã€‚

å¦‚æœä¸Šè¿°çš„ä»£ç èƒ½å¤Ÿæ­£å¸¸è¿è¡Œï¼Œä½ ä¼šåœ¨ç»ˆç«¯ä¸­çœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼š


![image.png](%E4%BD%BF%E7%94%A8Ultralytics%E5%BA%93%E8%AE%AD%E7%BB%83DOTA%E9%81%A5%E6%84%9F%E6%95%B0%E6%8D%AE%E9%9B%86%201439fafb0fa280e6934ed1f8a14d2663/image.png)

![image.png](%E4%BD%BF%E7%94%A8Ultralytics%E5%BA%93%E8%AE%AD%E7%BB%83DOTA%E9%81%A5%E6%84%9F%E6%95%B0%E6%8D%AE%E9%9B%86%201439fafb0fa280e6934ed1f8a14d2663/image%201.png)



### 3. æµ‹è¯•<span style="color:#FFBF00">æ—‹è½¬æ¡†</span>ç›®æ ‡æ£€æµ‹ï¼š

åŒæ ·ï¼ŒUltralyticsä¹Ÿå·²ç»å‡†å¤‡äº†å°å‹çš„é¥æ„Ÿç›®æ ‡æ£€æµ‹æ•°æ®ï¼Œå› æ­¤æˆ‘ä»¬ä¹ŸåŸºäºè¿™ä¸ªæ•°æ®æµ‹è¯•ä¸€ä¸‹é¥æ„Ÿç›®æ ‡æ£€æµ‹ä»»åŠ¡æ˜¯å¦å¯è¡Œã€‚

---

è¿™éƒ¨åˆ†çš„æ“ä½œå‡ ä¹ä¸2ä¸­ä¸€è‡´ï¼Œå…·ä½“æ“ä½œæ˜¯åœ¨ä¸€ä¸ªä»»æ„æ–‡ä»¶å¤¹ä¸­ç¼–å†™ä¸€ä¸ªpythonæ–‡ä»¶ï¼š

```python
from ultralytics import YOLO

if __name__ == '__main__':

	# Load a model
	model = YOLO("yolo11n-obb.pt")  # load a pretrained model (recommended for training)
	
	# Train the model
	results = model.train(data="dota8.yaml", epochs=100, imgsz=640)
```

æˆ‘ä»¬å…·ä½“éœ€è¦åšçš„ä¹Ÿå’Œ2ä¸­ä¸€è‡´ï¼Œå¦‚æœä¸Šè¿°ä»£ç èƒ½å¤Ÿæ­£å¸¸è¿è¡Œï¼Œä½ ä¼šåœ¨ç»ˆç«¯ä¸­çœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼š


![image.png](%E4%BD%BF%E7%94%A8Ultralytics%E5%BA%93%E8%AE%AD%E7%BB%83DOTA%E9%81%A5%E6%84%9F%E6%95%B0%E6%8D%AE%E9%9B%86%201439fafb0fa280e6934ed1f8a14d2663/image%202.png)


![image.png](%E4%BD%BF%E7%94%A8Ultralytics%E5%BA%93%E8%AE%AD%E7%BB%83DOTA%E9%81%A5%E6%84%9F%E6%95%B0%E6%8D%AE%E9%9B%86%201439fafb0fa280e6934ed1f8a14d2663/image%203.png)


å¦‚æœä½ æ“…é•¿è§‚å¯Ÿä¼šå‘ç°ï¼Œå¯¹æ¯”äºŒè€…è¾“å‡ºçš„æ¨¡å‹ç»“æ„ï¼ŒåŒºåˆ«å¾ˆå°ï¼Œä»…åœ¨æœ€åæŠŠ`ultralytics.nn.modules.head.Detect`æ¢æˆäº†`ultralytics.nn.modules.head.OBB`

åˆ«ç€æ€¥æŠŠåˆšåˆšç»ˆç«¯é‡Œå¾—åˆ°çš„ä¿¡æ¯åˆ æ‰ï¼Œæˆ‘ä»¬é©¬ä¸Šå°±ç”¨åˆ°ã€‚

## Part2

### 1. äº†è§£æ•°æ®å½¢å¼

å¤§å®¶å¸¸å¸¸è§‰å¾—é…ç½®ä¸€ä¸ªæ¨¡å‹éœ€è¦çš„æ•°æ®æ˜¯ä¸€ä»¶ç®€å•çš„äº‹ï¼Œå…¶å®å¹¶ä¸æ˜¯ï¼Œå› ä¸ºåªæœ‰æ•°æ®çš„æ ¼å¼å’Œæ¨¡å‹è¦æ±‚å®Œå…¨ä¸€è‡´æ—¶ï¼Œè¿™ä¸ªæ¨¡å‹æ‰èƒ½å®ç°æ­£å¸¸è®­ç»ƒã€‚
å› æ­¤æˆ‘ä»¬éœ€è¦å…ˆäº†è§£åˆšåˆšåˆ›å»ºçš„yolo11<span style="color:#FFBF00">OBB</span>ï¼ˆyolo11çš„æ—‹è½¬ç›®æ ‡æ£€æµ‹æ¨¡å‹ï¼‰æ‰€éœ€è¦çš„æ–‡ä»¶æ ¼å¼å’Œå¯¹åº”çš„<span style="color:#FFBF00">yamlæ–‡ä»¶</span>ã€‚

---

å…·ä½“æŸ¥çœ‹æ–¹å¼å°±æ˜¯ï¼Œé‡æ–°å›åˆ°åˆšåˆšæµ‹è¯•æ—¶ç»ˆç«¯è¿”å›çš„ä¿¡æ¯ï¼Œæ‰¾åˆ°ç±»ä¼¼äºå¦‚ä¸‹çš„ä¿¡æ¯ï¼ˆæˆ‘ä»¥æˆ‘çš„macbookä¸¾ä¾‹ï¼Œå¦‚æœæ˜¯windowsåº”è¯¥ä¼šä»ä¸€ä¸ªç£ç›˜å¼€å§‹ï¼Œä¾‹å¦‚D:ï½ï½)ï¼š



```
Unzipping /Users/lihaoyang/code/pycode/My_project/ultralytics/datasets/dota8.zip to /Users/lihaoyang/code/pycode/My_project
```


ç°åœ¨æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯åœ¨æˆ‘ä»¬çš„è®¡ç®—æœºä¸­æ‰¾åˆ°è¿™ä¸ªä½ç½®ï¼Œç„¶åå°±å¯ä»¥äº†è§£åˆ°å¤§è‡´çš„æ–‡ä»¶ç»“æ„ï¼š

```mermaid
graph TD
    A[datasets] --> B[images]
    A --> C[labels]
    B --> D[train]
    B --> E[val]
    C --> F[train]
    C --> G[val]
    D --> H[p1.jpg]
    D --> I[p2.jpg]
    E --> J[p3.jpg]
    E --> K[p4.jpg]
    F --> L[p1.txt]
    F --> M[p2.txt]
    G --> N[p3.txt]
    G --> O[p4.txt]
```

è¿™å°±æ˜¯Ultralyticsæ‰€è¦æ±‚çš„DOTAæ•°æ®é›†çš„åŸºæœ¬ç»“æ„ï¼Œäº†è§£å®Œè¿™äº›æˆ‘ä»¬å°±å¯ä»¥æ ¹æ®è¿™ä¸ªç»“æ„æ¥ç»„ç»‡æˆ‘ä»¬çš„æ•°æ®ã€‚

### 2. å‡†å¤‡æ•°æ®é›†

é¦–å…ˆéœ€è¦ä¸‹è½½DOTAæ•°æ®é›†çš„åŸæ•°æ®ï¼Œåœ¨å¦‚ä¸‹åœ°å€ï¼ˆhttps://captain-whu.github.io/DOTA/dataset.htmlï¼‰ä¸­æ‰¾åˆ°æ•°æ®é›†ä¸‹è½½çš„åœ°å€ï¼š

![image.png](%E4%BD%BF%E7%94%A8Ultralytics%E5%BA%93%E8%AE%AD%E7%BB%83DOTA%E9%81%A5%E6%84%9F%E6%95%B0%E6%8D%AE%E9%9B%86%201439fafb0fa280e6934ed1f8a14d2663/image%204.png)

æˆ‘ä»¬éœ€è¦ä¸‹è½½çš„æ˜¯DOTA-v1.0çš„æ•°æ®é›†ï¼Œè¯·é€‰æ‹©åˆé€‚çš„æ–¹æ¡ˆæ¥ä¸‹è½½ï¼ˆGoogleç½‘ç›˜å¥½åƒä¸ç”¨ä¼šå‘˜ï¼Œå¼€ä¸ªé­”æ³•ä¸‹è½½é€Ÿåº¦è¿˜ç®—ä¸é”™ï¼Œæˆ‘æœ‰ç™¾åº¦ç½‘ç›˜ä¼šå‘˜æˆ‘å°±ç”¨ç™¾åº¦ç½‘ç›˜ä¸‹äº†ï¼‰

ä¸‹è½½å¥½ä¹‹åæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹ä¸€ä¸‹æ•°æ®çš„æ–‡ä»¶ç»“æ„ï¼Œå¤§è‡´å¦‚ä¸‹ï¼š

```mermaid
graph TD
		O[DOTA] --> A1[train]
		O --> A2[val]
		O --> A3[test]
		
    A1 --> B1[images]
    B1 --> E1[zipæ–‡ä»¶]
    A1 --> C1[labelTxt-v1.0]
		A1 --> D1[labelTxt-v1.5]
    
    A2 --> B2[images]
    B2 --> E2[zipæ–‡ä»¶]
    A2 --> C2[labelTxt-v1.0]
		A2 --> D2[labelTxt-v1.5]
		   
		A3 --> B3[images]
    B3 --> E3[zipæ–‡ä»¶]

```

é¦–å…ˆæˆ‘ä»¬ç›´æ¥è§£å‹æ‰€æœ‰å›¾ç‰‡çš„å‹ç¼©åŒ…ï¼Œè®©å›¾ç‰‡æ–‡ä»¶ç›´æ¥åœ¨imagesç›®å½•ä¸‹ï¼Œè€Œæ ‡ç­¾æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è§£å‹labelTxt-v1.0ä¸­çš„labelTxt.zipï¼Œå…¶ä½™å¯ä»¥ç›´æ¥åˆ é™¤ï¼Œç„¶åæŠŠlabelTxtæ–‡ä»¶å¤¹æ‹–åˆ°å¤–é¢æ¥ï¼Œæœ€åç»“æ„å¦‚ä¸‹ï¼š

```mermaid
graph TD
		O[DOTA] --> A1[train]
		O --> A2[val]
		O --> A3[test]
    A1[train] --> B1[images]
    B1 --> E1[pngæ–‡ä»¶]
    A1 --> C1[labelTxt]
    C1 --> D1[txtæ–‡ä»¶]
    
    A2[val] --> B2[images]
    B2 --> E2[pngæ–‡ä»¶]
    A2 --> C2[labelTxt]
    C2 --> D2[txtæ–‡ä»¶]
		   
		A3[test] --> B3[images]
    B3 --> E3[pngæ–‡ä»¶]

```

### 3. åˆ‡å‰²æ•°æ®å›¾åƒå’Œæ ‡æ³¨

å¦‚æœä½ ç‚¹å¼€ä¸€äº›DOTAæ•°æ®é›†ä¸­çš„å›¾åƒï¼Œä½ ä¼šå‘ç°ï¼Œå›¾ç‰‡å°ºå¯¸éƒ½æ˜¯ä¸ä¸€æ ·å¤§çš„ï¼Œå¹¶ä¸”åˆ†è¾¨ç‡æé«˜ï¼Œè¿™æ ·çš„å›¾åƒä¸é€‚åˆç›´æ¥ç”¨æ¥è®­ç»ƒï¼Œå› æ­¤éœ€è¦æˆ‘ä»¬å…ˆåšåˆ‡å‰²ï¼Œç„¶åå†ç”¨äºè®­ç»ƒå’Œæ£€éªŒã€‚

---

æˆ‘ä»¬é¦–å…ˆéœ€è¦ä¸‹è½½DOTAæ•°æ®é›†çš„å·¥å…·ç®±ï¼ŒåŒæ ·æ¥è‡ªDOTAå®˜ç½‘ä¸­ï¼Œè¿™é‡Œæˆ‘ç›´æ¥ç»™åˆ°githubé“¾æ¥ï¼šhttps://github.com/CAPTAIN-WHU/DOTA_devkit

ä½ å¯ä»¥é€‰æ‹©ç›´æ¥ä¸‹è½½zipç„¶åè§£å‹ï¼Œæˆ–è€…å­¦ä¹ ä¸€ä¸ªç¨‹åºå‘˜ä¼šä½¿ç”¨çš„å…‹éš†æ“ä½œï¼ˆgitçš„ä½¿ç”¨æ–¹æ³•è‡ªè¡Œå­¦ä¹ ï¼Œåªéœ€è¦å­¦ä¼šæœ€ç®€å•çš„git cloneå…‹éš†ä»£ç ä»“åº“å°±å¯ä»¥ï¼‰ï¼š

```bash
git clone https://github.com/CAPTAIN-WHU/DOTA_devkit.git
```

æŠŠä¸‹è½½æ¥çš„ä»£ç æ”¾åˆ°åˆšåˆšä¸€èµ·çš„ä»£ç æ–‡ä»¶å¤¹ä¸­ï¼ˆä¸€ä¸ªè‰¯å¥½çš„ä¹ æƒ¯ï¼Œä¹Ÿçœå¾—å¼€å¤šä¸ªç¼–è¯‘å™¨é¡µé¢ï¼‰æ‰¾åˆ°å…¶ä¸­çš„`ImgSplit_multi_process.py`ä»£ç ï¼Œæ‹‰åˆ°æœ€åº•ä¸‹ï¼ˆ294è¡ŒåŠä»¥ä¸‹ï¼‰ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹ä»£ç ï¼š

```python
    split = splitbase(r'/home/dingjian/data/dota/val',
                       r'/home/dingjian/data/dota/valsplit',
                      gap=200,
                      subsize=1024,
                      num_process=8
                      )
```

é¦–å…ˆï¼Œè¿™ä¸ªå·¥å…·ç®±éœ€è¦ä¾èµ–äºshapelyåº“ï¼Œå› æ­¤åœ¨ç»ˆç«¯ä¸­å®‰è£…ä¸€ä¸‹ï¼š

```bash
pip install shapely
```

ä½ æ‰€éœ€è¦åšçš„ï¼Œå°±æ˜¯æŠŠä¸¤ä¸ªæ–‡ä»¶å¤¹çš„ç›®å½•ä¿®æ”¹ä¸€ä¸‹ã€‚ä¾‹å¦‚æˆ‘çš„DOTAæ•°æ®ä¸‹è½½åœ¨/mnt/mydisk/code/data/DOTAä¸‹ï¼Œæˆ‘æƒ³æŠŠåˆ†å‰²åçš„æ•°æ®å‚¨å­˜åœ¨DOTA_splitä¸‹ï¼Œé‚£æˆ‘å°±éœ€è¦å…ˆå‡†å¤‡å¥½ä¸€ä¸ªDOTA_splitæ–‡ä»¶å¤¹(è¦æœ‰ä¸‰ä¸ªå­æ–‡ä»¶å¤¹train,val,test)ï¼Œç„¶ åæŠŠä»£ç æ”¹æˆå¦‚ä¸‹ï¼Œå…¶ä¸­gapè¡¨ç¤ºåˆ‡å‰²æ—¶ç›¸é‚»å›¾åƒä¹‹é—´çš„é‡å åƒç´ å€¼ï¼Œsubsizeè¡¨ç¤ºåˆ‡å‰²å›¾ç‰‡çš„é•¿å®½ï¼š

```python
    split = splitbase('/mnt/mydisk/code/data/DOTA/train',
                       '/mnt/mydisk/code/data/DOTA_split/train',
                      gap=200,
                      subsize=1024,
                      num_process=8
                      )
```

ä»¥åŠï¼š

```python
    split = splitbase('/mnt/mydisk/code/data/DOTA/val',
                       '/mnt/mydisk/code/data/DOTA_split/val',
                      gap=200,
                      subsize=1024,
                      num_process=8
                      )
```

ç”±äºtesté›†ç¼ºå°‘æ ‡ç­¾æ–‡ä»¶æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨åˆ°`SplitOnlyImage_multi_process.py`è¿™ä¸ªä»£ç ï¼ŒåŒæ ·æ‰¾åˆ°æœ€ä¸‹æ–¹101è¡Œï¼Œä¿®æ”¹æ¡ˆä¾‹å¦‚ä¸‹ï¼ˆä¸€å®šè¦è®°å¾—åŠ ä¸Šgapå“¦ï¼ŒåŒæ—¶æ³¨æ„è¿™é‡Œè¦ç²¾ç¡®åˆ°imagesæ–‡ä»¶å¤¹ï¼‰ï¼š

```python
    split = splitbase('/mnt/mydisk/code/data/DOTA/test/images',
                      '/mnt/mydisk/code/data/DOTA_split/test/images',
                      gap=200,
                      num_process=32)
```

è‡³æ­¤ï¼Œåˆ‡å‰²æ•°æ®å›¾åƒå’Œæ ‡æ³¨å®Œæˆã€‚

### 4.è°ƒæ•´æ–‡ä»¶ç»“æ„

é€šè¿‡æ¯”è¾ƒyoloè‡ªåŠ¨æ„å»ºçš„æ–‡ä»¶ç»“æ„ï¼ˆå³æ‰€éœ€çš„æ–‡ä»¶ç»“æ„ï¼‰å’Œæˆ‘ä»¬åˆ‡å‰²åçš„æ–‡ä»¶ç»“æ„ï¼Œä¼šå‘ç°è¿˜æ˜¯æœ‰ä¸€äº›åŒºåˆ«ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åšä¸€äº›é€‚å½“è°ƒæ•´ã€‚

```mermaid
graph TD
    A[datasets] --> B[images]
    A --> C[labels]
    B --> D[train]
    B --> E[val]
    C --> F[train]
    C --> G[val]
    D --> H[p1.jpg]
    D --> I[p2.jpg]
    E --> J[p3.jpg]
    E --> K[p4.jpg]
    F --> L[p1.txt]
    F --> M[p2.txt]
    G --> N[p3.txt]
    G --> O[p4.txt]

		O1[DOTA_split] --> A1[train]
		O1 --> A2[val]
		O1 --> A3[test]
    A1[train] --> B1[images]
    B1 --> E1[pngæ–‡ä»¶]
    A1 --> C1[labelTxt]
    C1 --> D1[txtæ–‡ä»¶]
    
    A2[val] --> B2[images]
    B2 --> E2[pngæ–‡ä»¶]
    A2 --> C2[labelTxt]
    C2 --> D2[txtæ–‡ä»¶]
		   
		A3[test] --> B3[images]
    B3 --> E3[pngæ–‡ä»¶]
```

---

ä½ éœ€è¦å°†æ–‡ä»¶ç»“æ„è°ƒæ•´æˆå¦‚ä¸‹ç»“æ„ï¼Œè€ŒåUltralyticså°±å¯ä»¥è‡ªåŠ¨è¯»å–ã€‚

```mermaid
graph TD
    A[DOTA_split] --> B[images]
    A --> C[labels]
    B --> D[train]
    B --> E[val]
    C --> F[train]
    C --> G[val]
    D --> H[pngæ–‡ä»¶]
    E --> J[pngæ–‡ä»¶]
    F --> L[txtæ–‡ä»¶]
    G --> N[txtæ–‡ä»¶]
    A --> M[test]
    M --> P[pngæ–‡ä»¶]
```

### 5.è°ƒæ•´txtæ ¼å¼

å¦‚æœç‚¹å¼€yoloè‡ªåŠ¨ä¸‹è½½çš„dota8æ•°æ®ä¸­çš„txtæ ‡æ³¨ä¼šå‘ç°ï¼Œæ•°æ®çš„æ ¼å¼å½¢å¼å¦‚ä¸‹ï¼ˆå…¶ä¸­æ•°æ®ä¸º0ï½1ç›¸å¯¹å€¼æµ®ç‚¹æ•°åˆ†å¸ƒï¼‰ï¼š


```
object_id x1 y1 x2 y2 x3 y3 x4 y4
```


è€Œæˆ‘ä»¬ä¸‹è½½ååˆ‡å‰²å¾—åˆ°çš„æ•°æ®ï¼Œtxtæ ¼å¼åˆ™å¦‚ä¸‹ï¼ˆå…¶ä¸­æ•°æ®ä¸º0ï½1024æ•´å½¢åˆ†å¸ƒï¼‰ï¼š


```
x1 y1 x2 y2 x3 y3 x4 y4 object_name hard_level
```


---

ä¸ºäº†é€‚é…è®­ç»ƒï¼Œæˆ‘ä»¬å†å•ç‹¬å†™ä¸€ä¸ªç¨‹åºæ¥è°ƒæ•´txtæ–‡ä»¶çš„æ ¼å¼ï¼Œå…¶ä»£ç å¦‚ä¸‹ï¼š

```python
import os

# å®šä¹‰ object_name å’Œ object_id çš„æ˜ å°„å…³ç³»
object_mapping = {
    "plane": 0,
    "ship": 1,
    "storage-tank": 2,
    "baseball-diamond": 3,
    "tennis-court": 4,
    "basketball-court": 5,
    "ground-track-field": 6,
    "harbor": 7,
    "bridge": 8,
    "large-vehicle": 9,
    "small-vehicle": 10,
    "helicopter": 11,
    "roundabout": 12,
    "soccer-ball-field": 13,
    "swimming-pool": 14,
}
orin_directory = "labels"
target_directory = "labels_yolo"
# å®šä¹‰å‡½æ•°ï¼šå¤„ç†å•ä¸ªæ–‡ä»¶
def process_file(input_path, output_path):
    with open(input_path, 'r') as infile, open(output_path, 'w') as outfile:
        for line in infile:
            data = line.strip().split()
            if len(data) != 10:
                continue  # å¦‚æœæ•°æ®æ ¼å¼ä¸ç¬¦åˆè¦æ±‚ï¼Œè·³è¿‡è¯¥è¡Œ
            # æå– x1, y1, ..., x4, y4, object_name
            coords = [str(float(i)/1024.0) for i in data[:8]]
            object_name = data[8]
            # è·å– object_id
            object_id = object_mapping.get(object_name)
            if object_id is None:
                continue  # å¦‚æœ object_name ä¸åœ¨æ˜ å°„è¡¨ä¸­ï¼Œè·³è¿‡è¯¥è¡Œ
            # ç”Ÿæˆæ–°æ ¼å¼ï¼šobject_id x1 y1 x2 y2 x3 y3 x4 y4
            new_line = f"{object_id} " + " ".join(coords) + "\n"
            outfile.write(new_line)

# å®šä¹‰å‡½æ•°ï¼šéå†ç›®å½•ï¼Œå¤„ç†æ‰€æœ‰ txt æ–‡ä»¶
def process_directory(input_dir, output_dir):
    for root, _, files in os.walk(input_dir):
        for file in files:
            if file.endswith('.txt'):
                input_file_path = os.path.join(root, file)
                relative_path = os.path.relpath(input_file_path, input_dir)
                output_file_path = os.path.join(output_dir, relative_path)
                os.makedirs(os.path.dirname(output_file_path), exist_ok=True)
                process_file(input_file_path, output_file_path)

if __name__ == '__main__':
    # è®¾ç½®è¾“å…¥å’Œè¾“å‡ºç›®å½•
    data_directory = "/mnt/mydisk/code/data/DOTA_split/"

    # è°ƒç”¨å‡½æ•°
    process_directory(data_directory+orin_directory, data_directory+target_directory)
```

å…¶ä¸­input_directoryå’Œoutputè¯·æ ¹æ®ä½ å®‰è£…çš„æ•°æ®çš„ä½ç½®è€Œå®šï¼Œä¾‹å¦‚æˆ‘å®‰è£…åœ¨`/mnt/mydisk/code/data/DOTA_split/`ï¼Œè¿è¡Œå®Œæˆåä¼šåœ¨labelsåŒçº§ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªlabels_yoloï¼Œè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬éœ€è¦çš„txtæ–‡ä»¶äº†ã€‚ç‚¹è¿›å»ç¡®è®¤ä¸€ä¸‹txtæ–‡ä»¶æ²¡é—®é¢˜å°±å¯ä»¥æŠŠåŸæ¥çš„labelsæ–‡ä»¶å¤¹åˆ æ‰äº†ï¼Œç„¶åæŠŠåˆšåˆšå¾—åˆ°çš„labels_yoloæ”¹åç§°labelsã€‚

### 6. ç¼–å†™yamlæ–‡ä»¶

åœ¨åˆšåˆšæµ‹è¯•æ—‹è½¬æ¡†ç›®æ ‡æ£€æµ‹æ—¶ï¼Œæˆ‘ä»¬ç”¨åˆ°äº†ä¸€ä¸ª`dota.yaml`çš„æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶çš„ä½ç½®éœ€è¦å®šä½åˆ°ä½ çš„è™šæ‹Ÿç¯å¢ƒä¸­çš„æ–‡ä»¶å¤¹ï¼Œç›¸å¯¹ä¼šæœ‰ä¸€ç‚¹ç‚¹å¤æ‚ï¼Œå¦‚æœä½ èƒ½æ‰¾åˆ°Anacondaä¸‹ä½ è¿™ä¸ªç¯å¢ƒç›®å½•ï¼Œå¯ä»¥åœ¨å…¶ä¸­æ‰¾åˆ°ä½ å®‰è£…çš„Ultralyticsåº“çš„è¯¦ç»†å†…å®¹ã€‚å…·ä½“ä½ç½®ä¾‹å¦‚ï¼š~~/anaconda3/envs/yolo_dota/lib/python3.8/site-pachages/ultralytics/cfg/datasets/dota8.yaml

å¦‚æœä½ æ‰¾ä¸åˆ°ï¼Œä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œä½ åªéœ€è¦äº†è§£å…¶ä¸­çš„ä¸€äº›é‡è¦ä¿¡æ¯ï¼Œè¿™æ ·ä½ å°±èƒ½é¢†æ‚Ÿå¦‚ä½•ç¼–å†™ä¸€ä¸ªæˆ‘ä»¬è‡ªå·±çš„yamlæ–‡ä»¶ï¼š

```yaml
# Ultralytics YOLO ğŸš€, AGPL-3.0 license
# DOTA8 dataset 8 images from split DOTAv1 dataset by Ultralytics
# Documentation: https://docs.ultralytics.com/datasets/obb/dota8/
# Example usage: yolo train model=yolov8n-obb.pt data=dota8.yaml
# parent
# â”œâ”€â”€ ultralytics
# â””â”€â”€ datasets
#     â””â”€â”€ dota8  â† downloads here (1MB)

# Train/val/test sets as 1) dir: path/to/imgs, 2) file: path/to/imgs.txt, or 3) list: [path/to/imgs1, path/to/imgs2, ..]
path: ../datasets/dota8 # dataset root dir
train: images/train # train images (relative to 'path') 4 images
val: images/val # val images (relative to 'path') 4 images

# Classes for DOTA 1.0
names:
  0: plane
  1: ship
  2: storage tank
  3: baseball diamond
  4: tennis court
  5: basketball court
  6: ground track field
  7: harbor
  8: bridge
  9: large vehicle
  10: small vehicle
  11: helicopter
  12: roundabout
  13: soccer ball field
  14: swimming pool

# Download script/URL (optional)
download: https://github.com/ultralytics/assets/releases/download/v0.0.0/dota8.zip
```

åœ¨è¿™ä¸ªå…¶ä¸­ï¼Œä½ å¯ä»¥å¾ˆæ¸…æ¥šçš„çœ‹åˆ°ï¼Œyamlæ–‡ä»¶æ˜¯å¦‚ä½•å®šä¹‰path,train,valçš„æ•°æ®ä½ç½®çš„ï¼Œå½“ç„¶å½“æˆ‘ä»¬ä½¿ç”¨è‡ªå·±çš„æ•°æ®æ—¶ï¼Œæˆ‘ä¼šå†™æˆ<span style="color:#FFBF00">ç»å¯¹è·¯å¾„</span>ï¼Œå› ä¸ºUltralyticsåº“çš„ç›¸å¯¹è·¯å¾„éœ€è¦ä»ä»–çš„å›ºå®šæ–‡ä»¶ä¸‹è½½ç‚¹å¼€å§‹ï¼Œä¸ä¾¿äºæˆ‘ä»¬è§„åˆ’æˆ‘ä»¬çš„æ•°æ®é›†ä½ç½®ï¼ˆå¾ˆå¤šæ—¶å€™ä¸€ä¸ªæ•°æ®é›†è¦è¢«å¾ˆå¤šä¸åŒçš„ç¨‹åºä½¿ç”¨ï¼Œé€šå¸¸ç»Ÿä¸€ç®¡ç†ï¼‰ã€‚

---

æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨æˆ‘ä»¬çš„æ–‡ä»¶å¤¹ä¸­æ–°å»ºä¸€ä¸ªdota.yamlæ–‡ä»¶ï¼Œå…¶å…·ä½“å†…å®¹å‚è€ƒå¦‚ä¸‹ï¼š

```python
path: /mnt/mydisk/code/data/DOTA_split
train: images/train
val: images/val

# Classes for DOTA 1.0
names:
  0: plane
  1: ship
  2: storage tank
  3: baseball diamond
  4: tennis court
  5: basketball court
  6: ground track field
  7: harbor
  8: bridge
  9: large vehicle
  10: small vehicle
  11: helicopter
  12: roundabout
  13: soccer ball field
  14: swimming pool
```

## Part3

### 1. Ultralyticsåº“æœ€åŸºç¡€çš„ä½¿ç”¨æ–¹æ³•

ä¸‹é¢æˆ‘ä¼šç»™å‡ºä¸€äº›åŸºç¡€Ultralyticsåº“ä¸­çš„æ¨¡å‹åˆå§‹åŒ–ã€æ¨¡å‹è®­ç»ƒã€æ¨¡å‹æ£€æµ‹ç­‰æ¥å£çš„ä½¿ç”¨æ–¹æ³•ï¼Œè¿™é‡Œä»¥OBBä»»åŠ¡ä¸ºä¾‹ï¼Œåªéœ€è¦çœ‹ä¸€ä¸‹ï¼Œä¸ç”¨å®è·µï¼š

åˆå§‹åŒ–æ¨¡å‹ï¼š

```python
# ä½¿ç”¨yamlåˆ›å»ºæ¨¡å‹
model = YOLO("yolo11n-obb.yaml")
# ä½¿ç”¨ptæ–‡ä»¶åˆ›å»ºæ¨¡å‹
model = YOLO("yolo11n-obb.pt")
# åŠ è½½æƒé‡
model = YOLO("yolo11n-obb.yaml").load("yolo11n-obb.pt")
```

å‰äºŒè€…è€…çš„åŒºåˆ«åœ¨äºï¼Œå‰è€…åˆ©ç”¨æ¨¡å‹ç»“æ„è¿›è¡Œåˆå§‹åŒ–ï¼Œä¸å¸¦ç»è¿‡è®­ç»ƒçš„å‚æ•°ï¼ˆç›¸å½“äºä»å¤´å¼€å§‹ï¼‰ï¼Œåè€…ä½¿ç”¨çš„æ˜¯è®­ç»ƒåçš„å‚æ•°è¿›è¡Œåˆå§‹åŒ–ã€‚åŠ è½½æƒé‡åˆ™æ˜¯åœ¨ç¬¬ä¸€ä¸ªåŠ è½½çš„åˆå§‹åŒ–æ¨¡å‹ä¸ŠåŠ è½½ä¸€ä¸ªè®­ç»ƒå¥½çš„å‚æ•°ã€‚

æ¨¡å‹è®­ç»ƒï¼š

```python
# è®­ç»ƒ
results = model.train(data="dota8.yaml", epochs=100, imgsz=640)
# æ£€éªŒ
metrics = model.val(data="dota8.yaml")
# æ¨ç†
results = model("https://ultralytics.com/images/boats.jpg") 
```

å¤§å®¶å¯ä»¥æ ¹æ®ä¼ å…¥æ–‡ä»¶çš„å½¢å¼æ¥äº†è§£åˆ°æ¯ä¸ªæ¥å£çš„ç®€å•ä½¿ç”¨æ–¹æ³•.

### 2. è¿›è¡Œæ¨¡å‹è®­ç»ƒ

åªéœ€è¦è¿›è¡Œè¿‘ä¼¼äºpart1ä¸­çš„3ä¸­çš„æ“ä½œï¼ŒæŠŠå…¶ä¸­æŒ‡å®šçš„yamlæ–‡ä»¶ä¿®æ”¹æˆæˆ‘ä»¬åˆšåˆšç¼–å†™çš„yamlï¼ŒåŒæ—¶ä¸ºäº†æ¨¡æ‹Ÿä¸€ä¸ªä»ä»¥cocoé¢„è®­ç»ƒæ¨¡å‹ä¸ºåŸºç¡€è¿›è¡Œ<span style="color:#FFBF00">è¿ç§»å­¦ä¹ </span>è®­ç»ƒdotaæ•°æ®é›†çš„èŒƒå¼ï¼Œç¼–å†™ä¸€ä¸ªè®­ç»ƒä»£ç å¦‚ä¸‹ï¼Œå…¶ä¸­imgsz(image_size)å–1024ï¼Œä»¥åŠbatchå–2ä¹ŸåŒæ ·æ˜¯å› ä¸ºè¿™æ˜¯DOTAæ•°æ®è®­ç»ƒä¸­çš„èŒƒå¼è§„å®šï¼Œè€Œä¸”å¦‚æœæ›´å¤§ï¼Œè‹¥ä½ ä½¿ç”¨ç¬”è®°æœ¬ï¼Œæ˜¾å­˜ä¹Ÿä¼šä¸å¤Ÿï¼š

```python
import os
from ultralytics import YOLO

if __name__ == '__main__':

	current_folder = os.path.dirname(os.path.abspath(__file__))
	yaml_file_name = 'dota.yaml'
	yaml = f"{current_folder}/{yaml_file_name}"
	
	# Load a model
	model = YOLO("yolo11n-obb.yaml").load("yolo11n.pt")
	# Train the model
	results = model.train(data=yaml, epochs=12, imgsz=1024, batch=2)
```

å…¶ä¸­ï¼Œ`model = YOLO("yolo11n-obb.yaml").load("yolo11n.pt")`å³æ˜¯æˆ‘ä»¬æ‰€è¯´çš„è¿ç§»å­¦ä¹ çš„æ“ä½œï¼Œå‰æ–‡æˆ‘ä»¬æåˆ°äº†yolo11nå’Œyolo11n-obbçš„ç»“æ„å¹¶ä¸ä¸€è‡´ï¼Œåœ¨æœ€åçš„åˆ†ç±»ç±»åˆ«ä¸Šï¼Œå› ä¸ºå‰è€…åŸºäºcocoè¿›è¡Œè®­ç»ƒï¼Œæ‰€ä»¥åˆ†ç±»æ—¶ä¼šåˆ†æˆ80ç±»ï¼Œè€Œåè€…åœ¨åˆ†ç±»æ—¶åˆ†æˆ15ç±»ã€‚ä½†æˆ‘ä»¬çš„ç¨‹åºæ¥å£ä¸­ä¼šè‡ªåŠ¨åœ°è§£å†³è¿™ä¸ªä¸åŒ¹é…çš„é—®é¢˜ï¼Œå°†ä¸¤ä¸ªæ¨¡å‹å’Œæƒé‡ç»“æ„ç›¸åŒçš„éƒ¨åˆ†è¿›è¡Œèµ‹å€¼ï¼Œè€Œä¸ç›¸åŒçš„éƒ¨åˆ†ä¾æ—§é‡‡ç”¨åˆå§‹åŒ–ï¼Œä¸èµ‹äºˆé¢„å…ˆçš„æƒå€¼ã€‚

æ¯ç»è¿‡ä¸€ä¸ªepochï¼Œæƒé‡æ–‡ä»¶å°±ä¼šè¢«ä¿å­˜è‡³Ultralyticsçš„å·¥ä½œç›®å½•ï¼Œè¿™ä¸ªç›®å½•çš„ä½ç½®ä¼šåœ¨è®­ç»ƒå¼€å§‹çš„æ—¶å€™åœ¨æ§åˆ¶å°çš„æ—¥å¿—ä¸­è®°å½•ï¼Œä¾‹å¦‚ï¼šLogging results to /mnt/mydisk/code/First_Ablation_Experiment/yolo/ultralytics/runs/obb/trainæ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹æ‰“å¼€ï¼Œæƒé‡ä¼šè¢«ä¿å­˜åœ¨weightsæ–‡ä»¶å¤¹ä¸­ï¼Œåˆ†åˆ«æœ‰best.ptå’Œlast.ptã€‚

### 3. å¯è§†åŒ–é¢„æµ‹

å®Œæˆæ¨¡å‹æˆ–è€…å®Œæˆéƒ¨åˆ†è®­ç»ƒåï¼Œå¯ä»¥ç”¨è®­ç»ƒå¥½çš„æ¨¡å‹æ¨ç†å‡ å¼ å›¾ç‰‡çœ‹çœ‹æ•ˆæœï¼Œå…·ä½“æ–¹æ³•å¦‚ä¸‹ï¼Œå°†æ–‡ä»¶ä½ç½®æ›¿æ¢æˆä½ ä¿å­˜çš„æƒé‡æ–‡ä»¶ï¼Œç„¶ååœ¨åˆ‡å‰²åçš„æ•°æ®é›†ä¸­æŒ‘é€‰ä¸€å¼ å–œæ¬¢çš„å›¾ç‰‡æ¥æ¨ç†ï¼Œæ¨ç†çš„æ–‡ä»¶ä¼šä¿å­˜åœ¨ä»£ç è¿è¡Œçš„ç›®å½•ä¸‹ï¼š

```python
from ultralytics import YOLO

if __name__ == '__main__':

	# è®°å¾—æ›¿æ¢ä¸‹é¢çš„è·¯å¾„
	model = YOLO("/mnt/mydisk/code/First_Ablation_Experiment/yolo/ultralytics/runs/obb/train/weights/best.pt")
	results = model("/mnt/mydisk/code/data/DOTA_split/images/train/P0002__1__824___0.png")
	results[0].save()
```

### 4. è¿›è¡Œæ¨¡å‹æœ¬åœ°éªŒè¯

åœ¨valé›†ä¸­è¿›è¡Œæ¨ç†å¹¶å¾—åˆ°åˆ†æ•°ï¼Œå…¶å…·ä½“ä»£ç å¦‚ä¸‹ï¼š

```python
import os
from ultralytics import YOLO

if __name__ == '__main__':

	current = os.path.dirname(os.path.realpath(__file__))
	yama_file_name = 'dota.yaml'
	yaml = f"{current}/{yama_file_name}"
	
	# Load the model è®°å¾—æ›¿æ¢è¿™é‡Œçš„è·¯å¾„
	model = YOLO("/mnt/mydisk/code/First_Ablation_Experiment/yolo/ultralytics/runs/obb/train/weights/best.pt")
	# Test the model
	results = model.val(data=yaml, imgsz=1024, batch=2)
```

### 5. è¿›è¡Œæ¨¡å‹æµ‹è¯•ä¸ç»“æœåˆå¹¶

ç”±äºæˆ‘ä»¬éœ€è¦åœ¨åˆ‡å‰²åçš„æµ‹è¯•é›†ä¸Šè¿›è¡Œæ¨ç†ï¼Œå› æ­¤æœ€åè¿˜éœ€è¦å°†æ¨ç†æ–‡ä»¶åˆå¹¶ã€‚

---

è¿™é‡Œæˆ‘ä»¬éœ€è¦åˆ©ç”¨æˆ‘ä»¬çš„æ¨¡å‹åœ¨testä¸Šè¿›è¡Œé¢„æµ‹ï¼Œå¹¶ä¿å­˜ç»“æœï¼Œæ•…éœ€è¦å¦‚ä¸‹ä»£ç è¿›è¡Œæ¨ç†ï¼Œå¦‚æœä½ å¸Œæœ›æŠŠæ¨ç†çš„ç»“æœä¹Ÿä¸€èµ·å±•ç¤ºå‡ºæ¥ï¼Œå¯ä»¥æŠŠsaveçš„å‚æ•°è®¾ç½®æˆ`True`ï¼š

```python
import os
from ultralytics import YOLO

if __name__ == '__main__':

	current = os.path.dirname(os.path.realpath(__file__))
	# åˆå§‹åŒ–æ¨¡å‹å¹¶åŠ è½½æƒé‡ è®°å¾—æ›¿æ¢è¿™é‡Œçš„è·¯å¾„
	model = YOLO("/mnt/mydisk/code/First_Ablation_Experiment/yolo/ultralytics/runs/obb/train/weights/best.pt")
	# è¿›è¡Œæ¨ç†å¹¶ä¿å­˜ç»“æœ è®°å¾—æ›¿æ¢è¿™é‡Œçš„è·¯å¾„
	results = model.predict(source="/mnt/mydisk/code/data/DOTA_split/test/images", save=False, save_txt=True, save_conf=True)
```

æœ€ç»ˆè¿™ä¸ªæ–‡ä»¶ä¼šè¢«ä¿å­˜åœ¨runs/obb/predict/labelsçš„ç›®å½•ä¸‹

---

æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦åˆå¹¶æ‰€æœ‰çš„labelsï¼Œé¦–å…ˆæŒ‰ç…§å›¾ç‰‡ä¸ºå•ä½ï¼ŒæŠŠç”±ä¸€å¼ å›¾åˆ‡å‰²å¾—åˆ°çš„å›¾åƒä¸Šæ£€æµ‹å‡ºçš„labelsåˆ©ç”¨NMSç®—æ³•åˆå¹¶ã€‚è€Œåéå†æ‰€æœ‰å›¾ç‰‡ï¼Œæ ¹æ®ç‰©ä½“åç§°ä¿å­˜ç»“æœtxtï¼Œæ¯ä¸ªtxtä¸­çš„æ ¼å¼å¦‚ä¸‹ï¼š

```
image_id x1 y1 x2 y2 x3 y3 x4 y4 score
```


æœ€åæŠŠ15ç±»ç‰©ä½“çš„txtæ–‡æ¡£è¿›è¡Œæ‰“åŒ…ä¸ºzipæ–‡ä»¶ï¼Œå³å¯ä¸Šä¼ è‡³æœåŠ¡å™¨è¯„åˆ†ã€‚

ç”±äºä¸Šè¿°è¿‡ç¨‹æ¯”è¾ƒå¤æ‚ï¼Œå¹¶ä¸”ç°æœ‰å¯ä»¥å¾—åˆ°çš„åˆ†æ­¥å®ç°ä»£ç å¾ˆå¤šå·²ç»ä¸ç°åœ¨æµè¡Œçš„ç¬¬ä¸‰æ–¹åº“ç‰ˆæœ¬ä¸é€‚é…ï¼Œä¸ºäº†ä¾¿äºå¤§å®¶å®éªŒï¼Œæˆ‘å·²ç»å°†æ‰€æœ‰è¿‡ç¨‹é’ˆå¯¹yolo11çš„è¾“å‡ºå†™æˆäº†ä»£ç ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼Œè¯·æ³¨æ„æ›¿æ¢`result_dir`ï¼š

```python
import os
import numpy as np
from collections import defaultdict
import re
from tqdm import tqdm  # å¼•å…¥ tqdm
import zipfile

def extract_xy(img_id):
    """ä»æ–‡ä»¶åä¸­æå–å­å›¾çš„åæ ‡ (x, y)ã€‚"""
    pattern = re.compile(r'__(\d+)___(\d+)')
    match = pattern.search(img_id)
    if match:
        x, y = int(match.group(1)), int(match.group(2))
        return x, y
    else:
        return 0, 0

def parse_txt(file_path):
    """è§£æå­å›¾æ£€æµ‹ç»“æœæ–‡ä»¶."""
    results = []
    if not os.path.exists(file_path):
        return results
    with open(file_path, 'r') as f:
        for line in f:
            values = list(map(float, line.strip().split()))
            if len(values) == 10:  # label, x1, y1, ..., x4, y4, score
                results.append(values)
    return np.array(results)

def compute_iou(box1, box2):
    """è®¡ç®—ä¸¤ä¸ªå¤šè¾¹å½¢æ¡†çš„äº¤å¹¶æ¯” (IOU)ã€‚"""
    from shapely.geometry import Polygon
    poly1 = Polygon(box1[1:9].reshape(4, 2))  # æå–å¤šè¾¹å½¢åæ ‡
    poly2 = Polygon(box2[1:9].reshape(4, 2))
    if not poly1.is_valid or not poly2.is_valid:
        return 0
    inter = poly1.intersection(poly2).area
    union = poly1.union(poly2).area
    return inter / union if union > 0 else 0

def nms(detections, iou_thr=0.5):
    """éæå¤§å€¼æŠ‘åˆ¶ (NMS) å¤„ç†é‡å æ¡†."""
    if len(detections) == 0:
        return []
    # æŒ‰ç½®ä¿¡åº¦ä»é«˜åˆ°ä½æ’åº
    detections = sorted(detections, key=lambda x: x[-1], reverse=True)
    keep = []
    while detections:
        current = detections.pop(0)
        keep.append(current)
        detections = [
            det for det in detections
            if compute_iou(current, det) < iou_thr
        ]
    return keep

def merge_results(result_dir, output_dir, imgsz, iou_thr=0.5, conf_thr=0.3):
    """åˆå¹¶å­å›¾æ£€æµ‹ç»“æœåˆ°å®Œæ•´å›¾ç‰‡."""
    os.makedirs(output_dir, exist_ok=True)
    collector = defaultdict(list)

    # éå†ç›®å½•ï¼Œè¯»å–æ‰€æœ‰å­å›¾çš„æ£€æµ‹ç»“æœ
    all_files = [file for root, _, files in os.walk(result_dir) for file in files if file.endswith('.txt')]
    with tqdm(all_files, desc="Processing files", ncols=100) as pbar:
        for file in pbar:
            img_id = file.rsplit('.', 1)[0]
            oriname = img_id.split('__', maxsplit=1)[0]
            x, y = extract_xy(img_id)
            result_file = os.path.join(result_dir, file)
            dets = parse_txt(result_file)

            # å¦‚æœæ£€æµ‹ç»“æœå­˜åœ¨ï¼Œè°ƒæ•´åæ ‡
            if len(dets) > 0:
                dets[:, 1:9] *= imgsz  # å°†å½’ä¸€åŒ–åæ ‡è½¬æ¢ä¸ºç»å¯¹åƒç´ åæ ‡
                dets[:, 1:9:2] += x  # è°ƒæ•´ x åæ ‡
                dets[:, 2:9:2] += y  # è°ƒæ•´ y åæ ‡
                collector[oriname].extend(dets)

            # æ›´æ–°è¿›åº¦æ¡é™„åŠ ä¿¡æ¯
            pbar.set_postfix(file=file)

    # åˆå¹¶æ¯å¼ åŸå§‹å›¾ç‰‡çš„ç»“æœ
    with tqdm(collector.items(), desc="Merging results", ncols=100) as pbar:
        for oriname, results in pbar:
            if len(results) > 0:
                results = np.array(results)
                # è¿‡æ»¤ä½ç½®ä¿¡åº¦æ¡†
                results = results[results[:, -1] > conf_thr]
                # åº”ç”¨ NMS
                results = nms(results, iou_thr=iou_thr)
                results = np.array(results)
                output_file = os.path.join(output_dir, f"{oriname}.txt")
                np.savetxt(output_file, results, fmt="%.6f")

                # æ›´æ–°è¿›åº¦æ¡é™„åŠ ä¿¡æ¯
                pbar.set_postfix(file=f"Saved: {oriname}.txt")

# ç›®æ ‡ç±»åˆ«åç§°å¯¹åº”å…³ç³»
names = {
    0: "plane",
    1: "ship",
    2: "storage-tank",
    3: "baseball-diamond",
    4: "tennis-court",
    5: "basketball-court",
    6: "ground-track-field",
    7: "harbor",
    8: "bridge",
    9: "large-vehicle",
    10: "small-vehicle",
    11: "helicopter",
    12: "roundabout",
    13: "soccer-ball-field",
    14: "swimming-pool"
}

def process_txt_files(directory, output_dir):
    # éå†ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶
    for root, dirs, files in os.walk(directory):
        for file_name in files:
            if file_name.endswith('.txt'):
                img_name = file_name.split('.')[0]  # è·å–å›¾ç‰‡çš„åç§°ï¼Œä¸åŒ…å«æ‰©å±•å
                txt_path = os.path.join(root, file_name)

                # è¯»å–è¯¥txtæ–‡ä»¶
                with open(txt_path, 'r') as f:
                    lines = f.readlines()

                # éå†æ¯ä¸€è¡Œï¼Œå°†ç›®æ ‡ä¿¡æ¯æŒ‰ç±»åˆ«æ±‡æ€»
                for line in lines:
                    data = line.strip().split()
                    object_id = int(float(data[0]))  # è·å–ç›®æ ‡çš„id
                    bbox = data[1:-1]  # è·å–ç›®æ ‡çš„åæ ‡
                    score = data[-1]  # è·å–ç›®æ ‡çš„ç½®ä¿¡åº¦

                    object_name = names.get(object_id)
                    if object_name:
                        # ä¸ºè¯¥ç±»åˆ«åˆ›å»ºè¾“å‡ºæ–‡ä»¶
                        output_file = os.path.join(output_dir, f"Task1_{object_name}.txt")

                        # æ„å»ºéœ€è¦å†™å…¥çš„æ ¼å¼ï¼šimage_name score x1 y1 x2 y2 x3 y3 x4 y4
                        formatted_line = f"{img_name} {score} " + " ".join(bbox) + "\n"

                        # å°†æ•°æ®å†™å…¥å¯¹åº”çš„ç±»åˆ«æ–‡ä»¶
                        with open(output_file, 'a') as out_f:
                            out_f.write(formatted_line)

def zip_files(output_dir, zip_name="Task1.zip"):
    # åˆ›å»ºä¸€ä¸ª zip æ–‡ä»¶
    with zipfile.ZipFile(zip_name, 'w', zipfile.ZIP_DEFLATED) as zipf:
        for object_name in names.values():
            file_path = os.path.join(output_dir, f"Task1_{object_name}.txt")
            if os.path.exists(file_path):  # æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
                zipf.write(file_path, arcname=f"Task1_{object_name}.txt")

# ç¤ºä¾‹è°ƒç”¨
if __name__ == '__main__':
    result_dir = "/mnt/mydisk/code/First_Ablation_Experiment/yolo/ultralytics/runs/obb/predict/labels"  # å­˜æ”¾å­å›¾æ£€æµ‹ç»“æœçš„ç›®å½•
    output_dir = "./merged_results"  # åˆå¹¶åçš„ç»“æœä¿å­˜ç›®å½•
    imgsz = 1024  # å­å›¾çš„è¾“å…¥å¤§å° (åƒç´ )
    merge_results(result_dir, output_dir, imgsz=imgsz, iou_thr=0.1, conf_thr=0.5)

    # åˆ›å»ºè¾“å‡ºç›®å½•
    os.makedirs('./task1', exist_ok=True)

    # è°ƒç”¨å‡½æ•°å¤„ç†
    process_txt_files(output_dir, './task1')

    # å°†ç”Ÿæˆçš„ txt æ–‡ä»¶æ‰“åŒ…æˆ zip
    zip_files('./task1')
```

### 6. ä¸Šä¼ æœåŠ¡å™¨è¯„åˆ†

æœ€åå°†åˆå¹¶ç»“æœä¸Šä¼ è‡³DOTAå®˜æ–¹çš„æµ‹è¯„æœåŠ¡å™¨ï¼Œç­‰å¾…é‚®ä»¶å›å¤å³å¯çŸ¥é“æ¨¡å‹è¯„æµ‹æœ€ç»ˆå¾—åˆ†ã€‚

å…·ä½“æ“ä½œæµç¨‹è¯·è®¿é—®DOTAå®˜æ–¹æµ‹è¯„æœåŠ¡å™¨å®˜ç½‘æŸ¥çœ‹è¯¦ç»†è¦æ±‚ï¼ˆ**DOTA-v1.0 Server çš„ Task1 Evaluation Serverï¼‰**ï¼šhttps://captain-whu.github.io/DOTA/evaluation.html

## ä¸€äº›åè¯å¦‚æœä½ ä¸æ˜¯å¾ˆäº†è§£ï¼Œæˆ‘ä¼šåœ¨è¿™é‡Œè§£é‡Šï¼š

1. <span style="color:#FFBF00">è™šæ‹Ÿç¯å¢ƒ</span>ï¼šå¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸åŒé¡¹ç›®å¯èƒ½éœ€è¦<span style="color:red">ä¸åŒç‰ˆæœ¬</span>çš„ç¼–ç¨‹è¯­è¨€ã€åº“æˆ–å·¥å…·ã€‚ä¾‹å¦‚ï¼šé¡¹ç›®Aç”¨çš„æ˜¯Python 3.9ï¼Œä½†é¡¹ç›®Båªèƒ½åœ¨Python 3.6ä¸‹è¿è¡Œã€‚å¦‚æœæ‰€æœ‰é¡¹ç›®å…±ç”¨ä¸€ä¸ªå…¨å±€ç¯å¢ƒï¼Œä¼šå¯¼è‡´å†²çªã€‚è™šæ‹Ÿç¯å¢ƒè§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå®ƒå…è®¸æ¯ä¸ªé¡¹ç›®æœ‰è‡ªå·±çš„â€œä¸“å±ç©ºé—´â€ï¼Œäº’ä¸å¹²æ‰°ã€‚
å½“å‰æ¯”è¾ƒä¾¿äºä½¿ç”¨çš„è™šæ‹Ÿç¯å¢ƒç®¡ç†æ–¹æ¡ˆå°±æ˜¯anacondaï¼Œå…·ä½“anacondaå¦‚ä½•è¿›è¡Œé…ç½®ï¼Œå¯ä»¥åœ¨bilibiliä¸Šæœç´¢ï¼Œåœ¨åç»­çš„ä½¿ç”¨è¿‡ç¨‹ä¸­ä½ ä¼šæ…¢æ…¢ç†Ÿæ‚‰ã€‚
2. <span style="color:#FFBF00">PyTorch</span>:PyTorch æ˜¯ä¸€ä¸ª æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œç®€å•æ¥è¯´ï¼Œå®ƒèƒ½å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿæ„å»ºå’Œè®­ç»ƒç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œæ˜¯äººå·¥æ™ºèƒ½å’Œæ·±åº¦å­¦ä¹ é¢†åŸŸéå¸¸æµè¡Œçš„å·¥å…·ã€‚ä¸ºäº†èƒ½å¤Ÿé€‚åº”ä½ çš„ç”µè„‘ç¯å¢ƒï¼Œé€‰æ‹© PyTorch çš„ç‰ˆæœ¬æ—¶ï¼Œä¸»è¦éœ€è¦è€ƒè™‘ä»¥ä¸‹ä¸‰ç‚¹ï¼š
   1. pythonç‰ˆæœ¬ï¼š
    ä¾‹å¦‚ä½ å®‰è£…çš„pythonç‰ˆæœ¬æ˜¯3.8ï¼Œé‚£ä¹ˆä½ éœ€è¦å®‰è£…çš„pytorchå°±è¦å¯¹åº”python=3.8çš„ç‰ˆæœ¬ï¼Œä½†è¿™ä¸ªä¼šè‡ªåŠ¨åœ¨pipå®‰è£…çš„æ—¶å€™å®Œæˆé€‚é…ï¼Œæ‰€ä»¥ä¸å¿…è¦è¿‡å¤šæ‹…å¿§ã€‚
   2. æ˜¯å¦ä½¿ç”¨GPUï¼ˆCUDAï¼‰åŠ é€Ÿï¼š
    **GPU ç‰ˆæœ¬**ï¼šå¦‚æœä½ çš„ç”µè„‘é…æœ‰ NVIDIA æ˜¾å¡ï¼Œå¹¶å®‰è£…äº† CUDA å·¥å…·åŒ…ï¼Œå¯ä»¥é€‰æ‹© GPU ç‰ˆæœ¬ï¼Œå¤§å¹…æé«˜æ¨¡å‹è®­ç»ƒé€Ÿåº¦ã€‚
    **PU ç‰ˆæœ¬**ï¼šå¦‚æœæ²¡æœ‰ GPU æˆ–ä¸éœ€è¦å¤§è§„æ¨¡è®­ç»ƒï¼Œå¯ä»¥é€‰æ‹© CPU ç‰ˆæœ¬ã€‚å®ƒå¯¹ç¡¬ä»¶è¦æ±‚ä½ï¼Œå®‰è£…ç®€å•ã€‚
   3. å¯¹åº”çš„CUDAç‰ˆæœ¬ï¼š
    CUDA æ˜¯ NVIDIA æ˜¾å¡çš„å¹¶è¡Œè®¡ç®—å¹³å°ï¼ŒPyTorch çš„ GPU ç‰ˆæœ¬éœ€è¦ä¸ CUDA å¯¹åº”ã€‚
    ç¡®è®¤æ–¹æ³•ï¼šæ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ nvidia-smiï¼Œå¯ä»¥çœ‹åˆ°æ˜¾å¡æ”¯æŒçš„ CUDA ç‰ˆæœ¬ã€‚ä¾‹å¦‚ï¼šCUDA Version: 11.8ã€‚
å…·ä½“å¦‚ä½•å¾—åˆ°å¯¹åº”çš„å®‰è£…ä»£ç ï¼Œè¯·è¿›å…¥å®˜ç½‘https://pytorch.org/ ç‚¹å‡»<span style="color:blue">Get Started</span>åæ‰¾åˆ°Â [install previous versions of PyTorch](https://pytorch.org/get-started/previous-versions)ï¼ˆæˆ–è€…ä½ å¯ä»¥ç›´æ¥ç‚¹æ¥å·¦è¾¹è¿™ä¸ªé“¾æ¥ï¼‰
3. <span style="color:#FFBF00">æ°´å¹³æ¡†(HBB)ã€æ—‹è½¬æ¡†(OBB)</span>ï¼šHBB æ˜¯ä¸€ç§è½´å¯¹é½çš„çŸ©å½¢æ¡†ï¼Œå…¶è¾¹ä¸åæ ‡è½´å¹³è¡Œã€‚å®ƒåªéœ€è¦ç”¨å·¦ä¸Šè§’åæ ‡å’Œå®½ã€é«˜æ¥è¡¨ç¤ºï¼Œä¾‹å¦‚ (x, y, w, h)ã€‚OBB æ˜¯ä¸€ç§å¯ä»¥éšç›®æ ‡æ—‹è½¬çš„çŸ©å½¢æ¡†ï¼Œç”¨ä¸­å¿ƒç‚¹åæ ‡ã€å®½ã€é«˜ä»¥åŠæ—‹è½¬è§’åº¦è¡¨ç¤ºï¼Œä¾‹å¦‚ (x, y, w, h, aï¼Œå…¶ä¸­ a è¡¨ç¤ºæ¡†çš„æ—‹è½¬è§’åº¦ï¼Œæœ‰æ—¶ä¹Ÿä¼šç”¨(x1, y1, x2, y2, x3, y3, x4, y4)æ¥æ ‡æ³¨å››ä¸ªé¡¶ç‚¹ã€‚
4. <span style="color:#FFBF00">cocoé¢„è®­ç»ƒæƒé‡</span>ï¼šåœ¨cocoæ•°æ®é›†ä¸Šå……åˆ†è®­ç»ƒå¾—åˆ°çš„æƒé‡
5. <span style="color:#FFBF00">coco8.yaml</span>ï¼šCOCO8æ˜¯ä¸€ä¸ªå°å‹ä½†å¤šåŠŸèƒ½çš„ç›®æ ‡æ£€æµ‹æ•°æ®é›†ï¼Œç”±COCO train 2017é›†çš„å‰8å¼ å›¾åƒç»„æˆï¼Œ4å¼ ç”¨äºè®­ç»ƒï¼Œ4å¼ ç”¨äºéªŒè¯ã€‚ç›®çš„æ˜¯æœ€å¿«é€Ÿåº¦æµ‹è¯•æ¨¡å‹æ˜¯å¦èƒ½å¤Ÿæ­£å¸¸è®­ç»ƒå’ŒéªŒè¯
6. <span style="color:#FFBF00">OBB</span>ï¼šåœ¨æ—‹è½¬ç›®æ ‡æ£€æµ‹ï¼ˆRotated Object Detectionï¼‰ä¸­ï¼ŒOBB æ˜¯ **Oriented Bounding Box** çš„ç¼©å†™ï¼Œæ„æ€æ˜¯â€œå®šå‘è¾¹ç•Œæ¡†â€æˆ–â€œæ—‹è½¬çŸ©å½¢æ¡†â€ã€‚
7. <span style="color:#FFBF00">yamlæ–‡ä»¶</span>ï¼šåœ¨ä½¿ç”¨ Ultralytics åº“è¿›è¡Œè®­ç»ƒæ—¶ï¼Œ**YAML æ–‡ä»¶**æ‰®æ¼”äº†é‡è¦çš„è§’è‰²ã€‚å®ƒæ˜¯ä¸€ç§ä¸“é—¨ç”¨äºè®°å½•é…ç½®å’Œå‚æ•°çš„æ–‡ä»¶æ ¼å¼ï¼Œä¾¿äºç”¨æˆ·å®šä¹‰æ•°æ®é›†ç»“æ„ã€æ¨¡å‹å‚æ•°ä»¥åŠè®­ç»ƒè¶…å‚æ•°ï¼Œè€Œæ— éœ€ç›´æ¥åœ¨ä»£ç ä¸­ç¡¬ç¼–ç ã€‚
8. <span style="color:#FFBF00">ç»å¯¹è·¯å¾„</span>ï¼šç»å¯¹è·¯å¾„æ˜¯ä»ç³»ç»Ÿæ ¹ç›®å½•ï¼ˆå¦‚ Windows ä¸­çš„ç›˜ç¬¦ C:\ æˆ– Linux çš„ /ï¼‰å¼€å§‹ï¼Œå®Œæ•´æè¿°æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹çš„è·¯å¾„ã€‚
9. <span style="color:#FFBF00">è¿ç§»å­¦ä¹ </span>ï¼šåœ¨ä¾‹å¦‚COCOè¿™æ ·çš„å…¬å¼€å¤§å‹æ•°æ®é›†ä¸Šè¿›è¡Œå……åˆ†è®­ç»ƒï¼Œä»¥å¾—åˆ°é¢„è®­ç»ƒæ¨¡å‹ä¸ºåŸºç¡€è®­ç»ƒå…¶ä»–æ•°æ®é›†çš„æ–¹å¼ï¼Œé€šå¸¸è¢«ç§°ä¸ºâ€œè¿ç§»å­¦ä¹ â€ï¼Œä¸»è¦æ˜¯é€šè¿‡åˆ©ç”¨åœ¨COCOæ•°æ®é›†ä¸Šé¢„è®­ç»ƒçš„æƒé‡æ¥åˆå§‹åŒ–æ¨¡å‹çš„å‚æ•°ï¼Œç„¶ååœ¨ç›®æ ‡æ•°æ®é›†ä¸Šè¿›è¡Œå¾®è°ƒã€‚èƒ½å¤Ÿæœ‰æ•ˆå‡å°‘è®­ç»ƒæ—¶é—´ã€é¿å…è¿‡æ‹Ÿåˆã€æå‡æ³›åŒ–èƒ½åŠ›ã€‚
